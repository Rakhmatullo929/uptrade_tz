# Django –î—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–µ –ú–µ–Ω—é

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–≥–æ –º–µ–Ω—é –¥–ª—è Django —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **1 –∑–∞–ø—Ä–æ—Å –∫ –ë–î** –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –≤—Å–µ–≥–æ –º–µ–Ω—é –±–ª–∞–≥–æ–¥–∞—Ä—è `prefetch_related`
- ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–º—É URL
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ** –ø—Ä–µ–¥–∫–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞
- ‚úÖ **–†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–º–∫–æ–≤** –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞
- ‚úÖ **Named URL** –∏ –æ–±—ã—á–Ω—ã–µ URL
- ‚úÖ **Django Admin** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–Ω—é** –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚úÖ **Template tag** `{% draw_menu 'menu_name' %}`

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Django 4.2.9

## üì¶ –§–∞–π–ª—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- `requirements.txt` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- `requirements-dev.txt` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `.gitignore` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd uptrade-tz

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python -m venv venv

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
# –ù–∞ Windows:
venv\Scripts\activate
# –ù–∞ macOS/Linux:
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate

# –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)
python manage.py createsuperuser --username admin --email admin@example.com

# –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
python manage.py create_demo_menu

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

2. **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:**
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://127.0.0.1:8000/
- –ê–¥–º–∏–Ω–∫–∞: http://127.0.0.1:8000/admin/ (admin/admin)

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω–µ:

```html
{% load menu_tags %}
<!DOCTYPE html>
<html>
<head>
    <title>–ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
</head>
<body>
    <!-- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é -->
    {% draw_menu 'main_menu' %}
    
    <!-- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–æ–∫–æ–≤–æ–≥–æ –º–µ–Ω—é -->
    {% draw_menu 'sidebar_menu' %}
</body>
</html>
```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É Django: `/admin/`
2. –í —Ä–∞–∑–¥–µ–ª–µ **"–ú–µ–Ω—é"** —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –º–µ–Ω—é
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "main_menu")
4. –í —Ä–∞–∑–¥–µ–ª–µ **"–ü—É–Ω–∫—Ç—ã –º–µ–Ω—é"** —Å–æ–∑–¥–∞–π—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞**: –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç
   - **URL**: –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/about/`)
   - **Named URL**: –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π URL Django (–Ω–∞–ø—Ä–∏–º–µ—Ä, `menu:about`)
   - **–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—É–Ω–∫—Ç**: –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏
   - **–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏**: –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
uptrade-tz/
‚îú‚îÄ‚îÄ config/                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îú‚îÄ‚îÄ menu/                      # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ models.py             # –ú–æ–¥–µ–ª–∏ Menu –∏ MenuItem
‚îÇ   ‚îú‚îÄ‚îÄ admin.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ views.py              # –î–µ–º–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ urls.py               # URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ templatetags/         # Template tags
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ menu_tags.py      # –û—Å–Ω–æ–≤–Ω–æ–π template tag draw_menu
‚îÇ   ‚îú‚îÄ‚îÄ templates/menu/       # –®–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu.html         # –û—Å–Ω–æ–≤–Ω–æ–π —à–∞–±–ª–æ–Ω –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu_item.html    # –®–∞–±–ª–æ–Ω —ç–ª–µ–º–µ–Ω—Ç–∞ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ demo.html         # –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ management/commands/  # Django –∫–æ–º–∞–Ω–¥—ã
‚îÇ       ‚îî‚îÄ‚îÄ create_demo_menu.py
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ README.md
```

## üóÑ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Menu
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ–Ω—é (—Å—Ç—Ä–æ–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ template tag)

### MenuItem
- `menu` - —Å–≤—è–∑—å —Å –º–µ–Ω—é (ForeignKey)
- `title` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç –ø—É–Ω–∫—Ç–∞
- `url` - –ø—Ä—è–º–æ–π URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `named_url` - –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π URL Django (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `parent` - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –ø—É–Ω–∫—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `order` - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç **—Ç–æ–ª—å–∫–æ 1 SQL-–∑–∞–ø—Ä–æ—Å** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ–≥–æ –º–µ–Ω—é –±–ª–∞–≥–æ–¥–∞—Ä—è:

```python
menu = Menu.objects.prefetch_related(
    Prefetch('items', queryset=MenuItem.objects.select_related('parent'))
).get(name=menu_name)
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–∂–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –º–µ–Ω—é.

## üéØ –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

1. **–ö–æ—Ä–Ω–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã** –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã
2. **–ê–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é —Å `request.path`
3. **–ü—Ä–µ–¥–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è
4. **–ü—Ä—è–º—ã–µ –ø–æ—Ç–æ–º–∫–∏** –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
5. **CSS –∫–ª–∞—Å—Å—ã**:
   - `.active` - –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞
   - `.expanded` - –¥–ª—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤
   - `.show` - –¥–ª—è –≤–∏–¥–∏–º—ã—Ö –ø–æ–¥–º–µ–Ω—é

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π:
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ CSS –≤ —Ñ–∞–π–ª–µ `menu/templates/menu/menu.html`

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ template tag –≤ `menu/templatetags/menu_tags.py`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π:
–†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª—å `MenuItem` –∏ —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

## üß™ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Å:
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é
- –ë–æ–∫–æ–≤—ã–º –º–µ–Ω—é
- –ü—Ä–∏–º–µ—Ä–∞–º–∏ named URL –∏ –ø—Ä—è–º—ã—Ö URL
- –ö—Ä–∞—Å–∏–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–µ –º–µ–Ω—é:
```html
{% load menu_tags %}
{% draw_menu 'simple_menu' %}
```

### –ú–µ–Ω—é –≤ —Å–∞–π–¥–±–∞—Ä–µ:
```html
<div class="sidebar">
    {% draw_menu 'sidebar_menu' %}
</div>
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ–Ω—é:
```html
<nav class="top-menu">
    {% draw_menu 'top_menu' %}
</nav>

<aside class="side-menu">
    {% draw_menu 'side_menu' %}
</aside>
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–ï–¥–∏–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –ë–î** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `prefetch_related` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
2. **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** - `menu_item.html` –≤–∫–ª—é—á–∞–µ—Ç —Å–∞–º —Å–µ–±—è –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
3. **Lazy evaluation** - URL —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏** - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ Python –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–Ω—é –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `menu` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `INSTALLED_APPS`

**–ü—Ä–æ–±–ª–µ–º–∞**: Named URL –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `urls.py` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ CSS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —à–∞–±–ª–æ–Ω–µ

---

‚ú® **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –º–æ—â–Ω–æ–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–µ –º–µ–Ω—é –¥–ª—è Django –ø—Ä–æ–µ–∫—Ç–∞. 